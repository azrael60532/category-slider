let e="ontouchstart"in document.documentElement?"touchstart":"mousedown",s="ontouchend"in document.documentElement?"touchend":"mouseup",t="ontouchmove"in document.documentElement?"touchmove":"mousemove";function a(e){const s=window.getComputedStyle(e),t=s.transform||s.mozTransform;if("none"===t)return{x:0,y:0,z:0};const a=t.includes("3d")?"3d":"2d",i=t.match(/matrix.*\((.+)\)/)[1].split(", ");return"2d"===a?{x:Number(i[4]),y:Number(i[5]),z:0}:"3d"===a?{x:Number(i[12]),y:Number(i[13]),z:Number(i[14])}:void 0}function i(e){const s=e.querySelector(".wrapper").querySelectorAll(".item");let t=0;return s.forEach((e=>{const s=getComputedStyle(e),a=parseInt(s.marginLeft),i=parseInt(s.marginRight);t+=e.getBoundingClientRect().width+a+i})),t}function l(e){return a(e.slideWrapEl).x>=e.translateMin?"is-start":a(e.slideWrapEl).x<=e.translateMax?"is-end":a(e.slideWrapEl).x<e.translateMin&&a(e.slideWrapEl).x>e.translateMax?"is-middle":void 0}export class CategorySlider{constructor(e,s){this.el="string"==typeof e?document.querySelector(e):e,this.slideWrapEl=this.el.querySelector(".wrapper"),this.params={speed:300,prevOffsetLeft:50,clickSwitch:!0,breakpoint:!1},Object.assign(this.params,s),this.draggable=!0,this.isDown=!1,this.startX=0,this.nowTranslateX=a(this.slideWrapEl).x,this.slideTotalWidth=i(this.el),this.translateMin=0,this.translateMax=-Math.floor(Math.abs(i(this.el)-this.el.querySelector(".wrapper").getBoundingClientRect().width)),this.slidable=this.slideTotalWidth>Math.round(this.el.getBoundingClientRect().width)&&(!this.params.breakpoint||window.innerWidth<=this.params.breakpoint),this.init()}init(){const i=this;i.slidable&&(i.slideWrapEl.style.width=`${i.slideTotalWidth}px`,i.el.classList.add("slidable"),i.moveActive()),window.addEventListener("resize",(function(){i.update()})),function(i){const l=i.el,r=l.querySelector(".wrapper");r.addEventListener(e,(function(s){switch(i.isDown=!0,i.slidable&&r.classList.add("dragging"),e){case"mousedown":i.startX=s.pageX;break;case"touchstart":i.startX=s.changedTouches[0].pageX}i.nowTranslateX=a(r).x})),r.addEventListener(s,(function(e){let a;switch(i.isDown=!1,r.classList.remove("dragging"),r.classList.remove("moving"),t){case"mousemove":a=e.pageX-i.startX;break;case"touchmove":a=e.changedTouches[0].pageX-i.startX}if(0===a&&e.target.closest(".item")){if("mouseup"===s&&0!==e.button)return;r.querySelectorAll(".item").forEach((e=>{e.classList.remove("active")})),e.target.closest(".item").classList.add("active"),i.moveActive(i.params.speed)}else i.slidable&&i.resetPos(l)})),r.addEventListener("mouseleave",(function(){i.isDown&&i.slidable&&(i.isDown=!1,r.classList.remove("dragging"),r.classList.remove("moving"),i.resetPos(l))})),r.addEventListener(t,(function(e){if(i.draggable&&i.slidable){if(!i.isDown)return;let s;switch(e.preventDefault(),t){case"mousemove":s=e.pageX-i.startX;break;case"touchmove":s=e.changedTouches[0].pageX-i.startX}if(0!==s){r.classList.add("moving");const e={transition:"all 0ms ease 0s",transform:`translate3d(${i.nowTranslateX+s}px,0,0)`};Object.assign(r.style,e)}}}))}(i),function(e){const s=e.querySelectorAll("a");for(var t=0,a=s.length;t<a;t++)s[t].draggable=!1}(i.el)}moveActive(e){const s=this,t=s.slideWrapEl.querySelector(".item.active"),i=t.previousElementSibling?t.offsetLeft-s.params.prevOffsetLeft:0;if(s.slidable){if(-i>s.translateMax){const t={transition:`all ${e||0}ms ease 0s`,transform:`translate3d(-${i}px,0,0)`};Object.assign(s.slideWrapEl.style,t)}else{const t={transition:`all ${e||0}ms ease 0s`,transform:`translate3d(${s.translateMax}px,0,0)`};Object.assign(s.slideWrapEl.style,t)}if(e)s.slideWrapEl.addEventListener("transitionend",(function(){switch(s.nowTranslateX=a(s.slideWrapEl).x,l(s)){case"is-start":s.el.classList.add("is-start"),s.el.classList.remove("is-end");break;case"is-middle":s.el.classList.remove("is-start"),s.el.classList.remove("is-end");break;case"is-end":s.el.classList.remove("is-start"),s.el.classList.add("is-end")}}),!1);else switch(s.nowTranslateX=a(s.slideWrapEl).x,l(s)){case"is-start":s.el.classList.add("is-start"),s.el.classList.remove("is-end");break;case"is-middle":s.el.classList.remove("is-start"),s.el.classList.remove("is-end");break;case"is-end":s.el.classList.remove("is-start"),s.el.classList.add("is-end")}}}resetPos(){const e=this;switch(l(e)){case"is-start":e.el.classList.add("is-start"),e.el.classList.remove("is-end"),Object.assign(e.slideWrapEl.style,{transition:`all ${e.params.speed}ms ease 0s`,transform:"translate3d(0,0,0)"});break;case"is-middle":e.el.classList.remove("is-start"),e.el.classList.remove("is-end");break;case"is-end":e.el.classList.remove("is-start"),e.el.classList.add("is-end"),Object.assign(e.slideWrapEl.style,{transition:`all ${e.params.speed}ms ease 0s`,transform:`translate3d(${e.translateMax}px,0,0)`})}}update(){const e=this;e.el.querySelector(".wrapper").removeAttribute("style"),e.slideTotalWidth=i(e.el),e.translateMax=-Math.floor(Math.abs(i(e.el)-e.el.querySelector(".wrapper").getBoundingClientRect().width)),e.slidable=e.slideTotalWidth>Math.round(e.el.getBoundingClientRect().width)&&(!e.params.breakpoint||window.innerWidth<=e.params.breakpoint),e.slidable?(e.slideWrapEl.style.width=`${e.slideTotalWidth}px`,e.el.classList.add("slidable"),e.moveActive()):(e.el.classList.remove("slidable"),e.el.classList.remove("is-start"),e.el.classList.remove("is-end"),e.slideWrapEl.removeAttribute("style"))}}
//# sourceMappingURL=category-slider.min.js.map